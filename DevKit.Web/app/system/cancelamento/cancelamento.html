<div class="webFormPosition">
	<section class="widgetForm" style="width:975px">
		<legend class="legendTop">
			<table><tr height="12px"><td> </td></tr></table>
			<table style="color:white; width:100%">
                <tr height="48px">
                    <td width="20px"></td>
                    <td><i class="fa fa-spinner fa-spin" ng-show="loading"></i> Cancelamento de vendas <b>online </b> </td>
                    <td width="80px"></td>
                    <td></td>
                    <td width="20px"></td>
                </tr>
				<tr height="12px"></tr>
			</table>
		</legend>
		<div class="divWebForm">
            <table >
                <tr height="40px">                    
                    <td width="50px">
                        <b>NSU</b>
                    </td>
                    <td width="10px"></td>
                    <td width="20px">
                        <span class="btn btn-xs btn-danger" ng-show="stNSU_fail">!</span>
                    </td>
                    <td width="75px">
                        <input type="text" focus="true" numeric-only maxlength="6" class="form-control input-transparent" 
                               ng-model="viewModel.stNSU" style="font-size:14px; font-weight:800" 
                               ng-keyup="$event.keyCode == 13 && conferirNSU()">
                    </td>                 
                    <td width="10px"></td>
                    <td width="150px">
                        <span class="btn btn-warning" ng-if="viewModel.error.length > 0">
                            {{viewModel.error}}
                        </span>
                    </td>
                </tr>
            </table>

            <div class="widgetForm" ng-if="viewModel.cupom.length < 19" style="width:350px">
                <table ng-if="viewModel.cupom != undefined">

                    <tr height="32px">
                        <td></td>
                        <td colspan="2"><h3>Dados da transação</h3></td>
                    </tr>
                    
                    <tr data-ng-repeat="mdl in viewModel.cupom">
                        <td width="20px"></td>
                        <td>
                            {{mdl}}
                        </td>
                        <td width="20px"></td>
                    </tr>

                    <tr height="52px"></tr>

                    <tr >
                        <td></td>
                        <td colspan="2">
                            <button class="btn btn-primary" ng-click="limpar()">Voltar</button> 
                            <button class="btn btn-danger" ng-click="confirmar()">Confirmar cancelamento</button><br />
                        </td>
                    </tr>

                    <tr height="20px"></tr>

                </table>

                <table ng-if="viewModel.erroCancelamento != undefined" width="500px">
                    
                    <tr height="32px">
                        <td></td>
                        <td colspan="2"><h3>Falha no cancelamento</h3></td>
                    </tr>

                    <tr>
                        <td>
                            {{viewModel.erroCancelamento}}
                        </td>
                    </tr>

                    <tr height="20px"></tr>

                </table>
            </div>

            <div class="widgetForm" ng-if="viewModel.cupom.length >= 19" style="width:350px">

                <table id="printable">                    

                    <tr height="32px">
                        <td width="20px"></td>
                        <td colspan="2"><h3>Cupom cancelamento</h3></td>
                    </tr>

                    <tr height="20px"></tr>

                    <tr data-ng-repeat="mdl in viewModel.cupom">
                        <td width="20px"></td>
                        <td>
                            {{mdl}}
                        </td>
                        <td width="20px"></td>
                    </tr>

                    <tr height="20px"></tr>

                </table>

                <table>
                    <tr>
                        <td width="20px"></td>
                        <td>
                            <button class="btn btn-success" ng-click="printDiv('printable')">Imprimir</button><br />                            
                        </td>
                        <td width="20px"></td>
                        <td>
                            <button class="btn btn-primary" ng-click="limpar()">Voltar</button>
                        </td>
                    </tr>
                    <tr height="22px">
                    </tr>
                </table>                                
            </div>

        </div>
    </section>
</div>
