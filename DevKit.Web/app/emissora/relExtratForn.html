
<div class="webFormPostion" style="width:99%">
    <section class="widgetForm" style="width:95%">
        <legend class="legendTop">
            <table><tr height="12px"><td> </td></tr></table>
            <table style="color:white; width:100%">
                <tr height="48px">
                    <td width="20px"></td>
                    <td>Relatório: <b>EXTRATO POR LOJISTA</b> <i class="fa fa-spinner fa-spin" ng-show="loading"></i></td>
                </tr>                
            </table>
        </legend>
        <div class="divWebForm" style="max-width:95%;min-width:95%">
            <table class="widget" style="color: white">
                <tr height="22px"> </tr>
                <tr>
                    <td width="20px"></td>
                    <td width="600px">
                        <b>Selecione o tipo de demonstrativo do período</b> <br />
                        <br />
                        <label><input type="radio" name="status1" value="1" ng-model="pesquisa.tipo"> Em aberto</label><br />
                        <label><input type="radio" name="status2" value="2" ng-model="pesquisa.tipo"> Encerrados</label><br />
                        <br />
                    </td>
                </tr>
                <tr height="43px">
                    <td></td>
                    <td valign="top">
                        <table>
                            <tr height="43px">
                                <td width="80px">Mês</td>
                                <td width="20px"><button class="btn btn-xs btn-danger" ng-show="mes_fail">!</button></td>
                                <td width="200px">
                                    <input type="hidden" style="width:100%" placeholder="(Selecione)" ui-select2="campos.selects.mes" ng-model="campos.mes_inicial" />
                                </td>
                            </tr>
                            <tr height="43px">
                                <td>Ano</td>
                                <td><button class="btn btn-xs btn-danger" ng-show="ano_fail">!</button></td>
                                <td>
                                    <input type="text" class="form-control input-transparent" maxlength="4"
                                           ng-model="campos.ano_inicial">
                                </td>
                            </tr>
                            <tr height="43px">
                                <td>Código Lojista</td>
                                <td><button class="btn btn-xs btn-danger" ng-show="cod_fail">!</button></td>
                                <td>
                                    <input type="text" class="form-control input-transparent" maxlength="4"
                                           ng-model="campos.codigo">
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <br />
                        <button class="btn btn-primary" ng-click="search()">Pesquisar</button>
                    </td>
                </tr>
                <tr height="32px"></tr>
            </table>

            <div ng-show="list.length == 0">
                <br />
                <br />
                <div class="btn btn-info btn-lg">Nenhum registro encontrado.</div>
                <br />
                <br />
            </div>
            <div ng-show="list.length > 0">
                <h3>ConveyNET Benefícios</h3>
                <b>Emissão</b>: {{dtEmissao}}<br />
                <h4 ng-if="tipoSel == 1">EXTRATO DO LOJISTA EM ABERTO</h4>
                <h4 ng-if="tipoSel == 2">EXTRATO DO LOJISTA ENCERRADO</h4>
                Referência: {{referencia}}<br />
                <br />
                <b>Resumo do lojista</b>: {{lojista}}<br />
                Total lojista: R$ {{total}}<br />
                Total repasse: R$ {{totalRep}}<br />
                Total bonificação: R$ {{totalBonus}} ({{txAdmin}}%)<br />
                <br />
                <div data-ng-repeat="term in list">
                    <b>Terminal</b>: {{term.nome}}<br />
                    Convênio: {{term.empresa}}<br />
                    Situação: <span ng-if="tipoSel == 1">ABERTO</span>
                              <span ng-if="tipoSel == 2">ENCERRADO</span><br />                    
                    Total vendas: {{term.total}}<br />
                    Total repasse: {{term.totalRep}}<br />
                    <br />
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Serial</th>
                                <th>Data Venda</th>
                                <th>NSU</th>
                                <th>Valor Total</th>
                                <th>Parcela</th>
                                <th>Vlr. Parcela</th>
                            </tr>
                        </thead>
                        <tr data-ng-repeat="mdl in term.itens">
                            <td style="min-width:120px;">{{ mdl.serial }}</td>
                            <td style="min-width:120px;">{{ mdl.dtVenda }}</td>
                            <td style="min-width:120px;">{{ mdl.nsu }}</td>
                            <td style="min-width:120px;">{{ mdl.valor }}</td>
                            <td style="min-width:120px;">{{ mdl.parcela }}</td>
                            <td style="min-width:120px;">{{ mdl.vlrParcela }}</td>
                        </tr>
                    </table>
                    <br />
                </div>
            </div>
            <br />
            <br />
            <br />
        </div>
    </section>
    <br />
    <br />
</div>
