<div class="webFormPostion" style="width:95%">
    <section class="widgetForm" style="width:100%">
        <legend class="legendTop" style="width:100%">
            <table><tr height="12px"><td> </td></tr></table>
            <table style="color:white; width:100%">
                <tr>
                    <td width="20px"></td>
                    <td>Autorização de <b>Procedimento</b> <i class="fa fa-spinner fa-spin" ng-show="loading"></i></td>
                </tr>
                <tr height="12px"></tr>
            </table>
        </legend>
        <div class="divWebFormListing" style="padding-left:35px;">
            <table>
                <tr>
                    <td valign="top">
                        <br />
                        <table class="widget" style="color:white">
                            <tr>
                                <td></td>
                                <td colspan="3">
                                    <h3>Selecione o cartão</h3>
                                </td>
                            </tr>
                            <tr height="22px" />
                            <tr height="36px">
                                <td width="25px"></td>
                                <td width="500px">
                                    <table width="430px">
                                        <tr>
                                            <td width="90px"><b>Dígitos:</b></td>
                                            <td width="90px"><input type="text" focus="true" class="form-control input-transparent" ng-model="campos.cartEmp" maxlength="6" /></td>
                                            <td width="30px"></td>
                                            <td width="90px"><input type="text" class="form-control input-transparent" ng-model="campos.cartMat" maxlength="6" /></td>
                                            <td width="30px"></td>
                                            <td width="70px"><input type="text" class="form-control input-transparent" ng-model="campos.cartCA" maxlength="4" /></td>
                                            <td width="30px"></td>
                                            <td width="70px"><input type="text" class="form-control input-transparent" ng-model="campos.cartTitVia" maxlength="4" /></td>
                                        </tr>
                                    </table>
                                </td>
                                <td valign="top" width="60px">
                                    <button type="submit" class="btn btn-primary" ng-click="buscarCartao()">Pesquisa</button>
                                </td>
                                <td width="60px"></td>
                            </tr>
                            <tr height="22px"></tr>
                            <tr ng-if="associado != undefined">
                                <td></td>
                                <td>
                                    <table class="table table-hover" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Matrícula</th>
                                                <th>Nome do associado</th>
                                            </tr>
                                        </thead>
                                        <tr>
                                            <td>{{ associado.nuMatricula }}</td>
                                            <td>{{ associado.stName }}</td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr ng-if="associado != undefined" height="22px">
                                <td></td>
                                <td colspan="4">
                                    <p>Valor máximo permitido: <b>R$ {{associado.svrMaxEmp}}</b></p><br />
                                </td>
                            </tr>
                        </table>
                        <div ng-if="associado != undefined">
                            <table class="widget" style="color:white">
                                <tr>
                                    <td></td>
                                    <td colspan="7">
                                        <h3>Selecione o procedimento</h3>
                                    </td>
                                </tr>
                                <tr height="22px">
                                    <td width="25px"></td>
                                    <td width="90px"></td>
                                    <td width="90px"></td>
                                    <td width="60px"></td>
                                    <td width="110px"></td>
                                    <td width="130px"></td>
                                    <td width="60px"></td>
                                    <td width="110px"></td>
                                    <td width="60px"></td>
                                </tr>
                                <tr height="36px">
                                    <td></td>
                                    <td><b>Código</b></td>
                                    <td>
                                        <input type="text" class="form-control input-transparent" ng-model="campos.codigo" />
                                    </td>
                                    <td></td>
                                    <td><b>Procedimento</b></td>
                                    <td>
                                        <input type="text" class="form-control input-transparent" ng-model="campos.procedimento" />
                                    </td>
                                    <td></td>
                                    <td>
                                        <button type="submit" class="btn btn-primary" ng-click="search()">Pesquisa</button>
                                    </td>
                                    <td></td>
                                </tr>
                                <tr height="36px">
                                    <td></td>
                                    <td colspan="8">
                                        <table>
                                            <tr>
                                                <td width="20px"><input type="checkbox" class="form-control input-transparent" checked ng-model="campos.aut" /></td>
                                                <td> Somente procedimentos autorizados pela associação</td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr height="22px"> </tr>
                            </table>
                            <table width="95%">
                                <tr>
                                    <td valign="top">
                                        <div ng-show="list.length == 0">
                                            <div class="btn btn-info btn-lg">Nenhum registro encontrado.</div>
                                            <br />
                                            <br />
                                        </div>
                                        <div ng-show="list.length > 0">
                                            <ng-paginacao ng-if="(selecionouProc > 0 && mdl.nuCodTUSS == selecionouProc) || selecionouProc == null"
                                                          carregar="load"
                                                          list="list"
                                                          total="total"
                                                          itensporpagina="itensporpagina"
                                                          paginador="paginador">
                                            </ng-paginacao>
                                            <br />
                                            <table class="table table-hover" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>Código</th>
                                                        <th>Desc. Grupo</th>
                                                        <th>Desc. Sub-Grupo </th>
                                                        <th>Procedimento</th>
                                                    </tr>
                                                </thead>
                                                <tr ng-if="(selecionouProc > 0 && mdl.nuCodTUSS == selecionouProc) || selecionouProc == null" data-ng-repeat="mdl in list">
                                                    <td><input type="checkbox" ng-checked="mdl.selecionado" ng-click="marcar(mdl)" /></td>
                                                    <td>{{ mdl.nuCodTUSS }}</td>
                                                    <td>{{ mdl.stDescricaoGP }}</td>
                                                    <td>{{ mdl.stDescricaoSubGP }}</td>
                                                    <td>{{ mdl.stProcedimento }}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                            <button ng-if="associado != undefined" type="submit" class="btn btn-lg btn-success" ng-click="abreSenha()">Autorizar Procedimento</button>
                        </div>

                        <div class="modal-backdrop"
                             ng-if="pedirSenha == true"
                             style="background: rgba(55, 55, 55, 0.5 );">
                            <div class="modal-dialog" style="width:500px">
                                <br />
                                <br />
                                <br />
                                <div class="modal-content" style="color:black">
                                    <legend style="color:black">
                                        Senha do associado
                                        <button class="btn btn-transparent btn-lg pull-right" ng-click="closeModalSenha()"> X </button> &nbsp;
                                    </legend>

                                    <br />
                                    <table class="widget">
                                        <tr height="22px"></tr>
                                        <tr>
                                            <td width="20px"></td>
                                            <td width="120px">Senha</td>
                                            <td width="90px">
                                                <input type="password" ng-model="campos.senhaCartao" />
                                            </td>
                                            <td width="20px"></td>
                                        </tr>
                                        <tr height="22px"></tr>
                                    </table>
                                    <br />

                                    <div class="pull-right">
                                        <button class="btn btn-default" ng-click="closeModalSenha()"> Cancelar </button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <button class="btn btn-success" ng-disabled="campos.senhaCartao.length != 4" ng-click="autorizar()"> Autorizar </button>
                                    </div>
                                    <br />
                                    <br />
                                </div>
                            </div>
                        </div>

                        <div class="modal-backdrop"
                             ng-if="mostraGuia == true"
                             style="background: rgba(55, 55, 55, 0.5 );">
                            <div class="modal-dialog" style="width:1100px">
                                <br />
                                <br />
                                <br />
                                <div class="modal-content" style="color:black">
                                    <legend style="color:black">
                                        Guia de autorização
                                    </legend>
                                    Validade: {{cupom.validade}}
                                    <br />
                                    <br />
                                    <table border="1" style="background-image:url('../../images/user.png';background-repeat:no-repeat">
                                        <thead>
                                            <tr>
                                                <td width="300px"></td>
                                                <td width="300px"></td>
                                                <td width="150px"></td>
                                                <td width="150px"></td>
                                            </tr>
                                        </thead>
                                        <tr height="30px">
                                            <td></td>
                                            <td><b>{{cupom.empresa}}</b></td>
                                            <td colspan="2">Emissão guia: <b>{{cupom.emissao}}</b></td>
                                        </tr>
                                        <tr height="30px">
                                            <td></td>
                                            <td>Autorização/NSU: <b>{{cupom.autorizacao}}</b></td>
                                            <td colspan="2"></td>
                                        </tr>
                                        <tr height="15px"></tr>
                                        <tr height="30px">
                                            <td>Associado: <br /><b>({{cupom.associadoMat}}) {{cupom.associadoNome}}  - Tit.: {{cupom.associadoTit}}<br />Matrícula Saúde: {{cupom.associadoMatSaude}}</b></td>
                                            <td>Credenciado: <br /><b>{{cupom.credenciado}}</b></td>
                                            <td colspan="2">Vínculo/secao: <br /><b>{{cupom.secao}}</b></td>
                                        </tr>
                                        <tr height="15px"></tr>
                                        <tr height="30px">
                                            <td><b>TUSS</b></td>
                                            <td><b>PROCEDIMENTO</b></td>
                                            <td><b>VALOR INTEGRAL</b></td>
                                            <td><b>VALOR CO-PARTICIPAÇÃO</b></td>
                                        </tr>
                                        <tr height="15px"></tr>
                                        <tr height="30px">
                                            <td>{{cupom.tuss}}</td>
                                            <td>{{cupom.procedimento}}</td>
                                            <td>R$ {{cupom.vrIntegral}}</td>
                                            <td>R$ {{cupom.vrCoPart}}</td>
                                        </tr>
                                        <tr height="15px"></tr>
                                    </table>
                                    <br />
                                    <br />
                                    <table>
                                        <tr>
                                            <td>
                                                <img src="../../images/fumam.png" style="max-height:180px" />
                                            </td>
                                            <td width="20px"></td>
                                            <td>
                                                Através do presente reconheço expressamente que possuo esta autorização para ser descontado <br />
                                                em minha folha de pagamento, conforme coparticipação de R$ {{cupom.vrCoPart}}
                                                <br />
                                                <br />
                                                _______________________________________<br />
                                                {{cupom.associadoNome}}
                                                <br />
                                                <br />
                                            </td>
                                        </tr>
                                    </table>

                                    <br />
                                    <br />

                                    <div align="center">
                                        <button class="btn btn-success" ng-click="imprimirGuia()"> Imprimir </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </div>
    </section>
    <br />
    <br />
</div>